# APEC — Анализ электрических цепей с PySpice

## Описание

Этот проект предназначен для анализа электрических цепей с помощью библиотеки PySpice и символьных вычислений. Программа строит граф цепи, определяет ветви, формирует уравнения по законам Кирхгофа и решает их численно и символьно, визуализируя результаты.

## Как создавать схему в коде

Схема создаётся в файле `src/main.py` с помощью PySpice. Пример:

```python
from PySpice.Spice.Netlist import Circuit
from PySpice.Unit import *
from Line import Line as LineCircuit

circuit = Circuit('MyCircuit')
# Добавление пользовательского подмодуля (если нужно)
circuit.subcircuit(LineCircuit('Line'))

# Пример добавления источника напряжения между узлом 1 и землёй
circuit.V(1, 1, circuit.gnd, 100@u_V)
# Резистор между узлами 1 и 2
circuit.R(1, 1, 2, 1@u_Ohm)
# Катушка индуктивности между узлами 2 и 3
circuit.L(1, 2, 3, 0.001@u_H)
# Резистор между узлами 3 и 5
circuit.R(3, 3, 5, 10@u_Ohm)
# Конденсатор между узлом 1 и 5 и землёй
circuit.C(1, 5, circuit.gnd, 0.001@u_F)
# Включение подмодуля Line между узлами 3 и 4
circuit.X(1, 'Line', 3, 4)
# Резистор между узлом 4 и землёй
circuit.R(2, 4, circuit.gnd, 2@u_Ohm)
```

**Важные правила:**

- Схема должна быть связной: из одного узла можно попасть во все остальные.
- Не допускаются параллельные резисторы (но можно комбинировать с другими элементами).
- Для сложных цепей используйте подмодули (см. пример с `Line`).
- Узлы нумеруются целыми числами, земля — `circuit.gnd`.
- Для каждого элемента используйте уникальный номер (например, `R(1, ...)`, `R(2, ...)`).

## Структура проекта

- `src/` — основные исходные файлы:
  - `main.py` — основной скрипт, запускающий анализ цепи, построение графа, формирование уравнений и визуализацию.
  - `functions.py` — функции для работы с элементами цепи, построения графа соединений, получения параметров элементов.
  - `give_f.py` — функции для символьного анализа, формирования уравнений Кирхгофа, подстановки значений и упрощения выражений.
  - `ploti.py` — функции для численного решения системы ОДУ и построения графиков результатов.
  - `Line.py` — определение пользовательского подмодуля цепи (SubCircuit) для PySpice.
- `examples/` — примеры и тесты (например, `test.py`).
- `requirements.txt` — список зависимостей проекта.
- `.gitignore` — исключения для git.

## Установка

1. Установите Python 3.10+.
2. Установите зависимости:

```bash
pip install -r requirements.txt
```

## Запуск

```bash
python src/main.py
```

## Пример использования

В `src/main.py` задаётся схема цепи через PySpice. После запуска программа выведет информацию о ветвях, напряжениях и построит графики изменения токов/напряжений во времени.

## Требования

- Python 3.10+
- PySpice 1.5
- numpy, scipy, matplotlib, networkx, sympy

## Автор

Укажите своё имя и контакты при необходимости.
