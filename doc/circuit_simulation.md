# circuit_simulation.py

## Назначение

Основной скрипт для анализа электрических цепей. Формирует схему, определяет элементы, строит граф соединений, генерирует уравнения, решает их и визуализирует результаты.

## Основные этапы работы

1. **Определение схемы**: Схема задаётся с помощью PySpice (узлы, элементы, подцепи).
2. **Анализ структуры**: Определяются индуктивности, конденсаторы, строится граф соединений.
3. **Вычисление ветвей**: Находятся ветви схемы для дальнейшего анализа.
4. **Генерация уравнений**: Формируются уравнения по законам Кирхгофа для токов и напряжений.
5. **Ввод начальных условий**: Пользователь вводит значения для индуктивностей и конденсаторов.
6. **Решение системы**: Решается система ОДУ, строятся графики изменения токов и напряжений.

## Ключевые функции

- `input_initial_conditions(lc_elements, voltages)` — запрос начальных условий у пользователя.
- `calculate_voltages(currents, nodes_list)` — вычисление напряжений на элементах.
- `generate_equations_for_circuit(currents, voltages, need_to_find, nodes_list, state_variables)` — генерация уравнений и запуск визуализации.

## Пример схемы

```python
circuit = Circuit('1')
circuit.subcircuit(LineCircuit('Line'))
circuit.V(1, 1, circuit.gnd, 100@u_V)
circuit.R(1, 1, 2, 1@u_Ω)
circuit.L(1, 2, 3, 0.001@u_H)
circuit.R(3, 3, 5, 10@u_Ohm)
circuit.C(1, 5, circuit.gnd, 0.001@u_F)
circuit.X(1, 'Line', 3, 4)
circuit.R(2, 4, circuit.gnd, 2@u_Ohm)
```

## Входные и выходные данные

- Вход: описание схемы, параметры элементов, начальные условия.
- Выход: графики токов и напряжений, аналитические выражения.
